import{r as p,j as e,u as g}from"./components-DXjvQtQo.js";import{H as j}from"./Header-B68GKmy8.js";function f({fileHeaders:r,systemHeaders:i,initialMapping:n={},onMappingChange:l}){const[d,c]=p.useState(n);p.useEffect(()=>{if(Object.keys(n).length===0){const s={};r.forEach(t=>{const a=t.toLowerCase().trim(),u=i.find(h=>{const m=h.name.toLowerCase().trim();return a===m||a.includes(m)||m.includes(a)});u&&(s[t]=u.id)}),c(s),l(s)}},[r,i,n,l]);const o=(s,t)=>{const a={...d};t===""?delete a[s]:a[s]=t,c(a),l(a)},x=i.filter(s=>s.isRequired).filter(s=>!Object.values(d).includes(s.id));return e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Map Your Columns"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Match your file columns to our system fields."}),x.length>0&&e.jsx("div",{className:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded-md",children:e.jsxs("p",{className:"text-sm text-yellow-700",children:[e.jsx("span",{className:"font-medium",children:"Required fields missing: "}),x.map(s=>s.name).join(", ")]})}),e.jsx("div",{className:"mt-4 border rounded-md overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"File Column"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"System Field"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:s}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("select",{className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",value:d[s]||"",onChange:t=>o(s,t.target.value),children:[e.jsx("option",{value:"",children:"-- Do not import --"}),i.map(t=>e.jsxs("option",{value:t.id,children:[t.name," ",t.isRequired?"(Required)":""]},t.id))]})})]},s))})]})})]})}function v(){const{user:r,campaign:i,fileId:n,filename:l,originalHeaders:d,previewData:c,systemHeaders:o}=g();return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(j,{user:r}),e.jsx("main",{className:"py-10",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Map Columns"}),e.jsxs("p",{className:"mt-2 text-sm text-gray-700",children:["Map columns from ",l," to system fields for campaign: ",i.name]})]}),e.jsx(f,{fileId:n,originalHeaders:d,systemHeaders:o,previewData:c})]})})]})}export{v as default};
